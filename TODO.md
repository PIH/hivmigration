hivmigration
============


# THESE REPRESENT ALL OF THE TABLES WITH DATA WE NEED TO EXPORT AND MIGRATE

##### TABLES THAT NEED FURTHER INVESTIGATION #####

# ACCOMPAGNATEUR:  AS OF 10/30/2014, NO DATA IN THESE TABLES
HIV_ACCOMPAGNATEUR
HIV_PATIENT_ACCOMPAGNATEUR

# DOUBLE CHECK WITH LOUISE ON THIS, BUT I BELIEVE THIS IS NO LONGER NEEDED. SIMPLY KEEPS TRACK OF WHICH PATIENTS ARE ANLAP AND WHAT GROUP THEY ARE ASSIGNED TO
HIV_ANLAP_PATIENTS

# DELETED PATIENTS.  I WOULD THINK ARCHIVING THIS IS SUFFICIENT
HIV_DELETED_PATIENTS

# TABLE THAT SIMPLY LINKS A PATIENT_ID WITH A MERGED PATIENT_ID, SO THAT IF SOMEONE IS LOOKING UP BY PATIENT ID AND THAT PATIENT HAS BEEN MERGED INTO ANOTHER, IT CAN BE FOUND.  KEEP?
HIV_MERGE_ARCHIVE

# OLD MESSAGES AND ERROR REPORTS.  CAN WE JUST GET THESE LOOKED AT AND ADDRESSED PRIOR TO MIGRATION, SINCE THEY ARE GENERALLY NO LONGER USED?
HIV_ERRORS
HIV_MESSAGES

# TABLE THAT KEEPS TRACK OF WHAT DATA QUALITY LISTS PATIENTS ARE SHOWING UP ON, AND ENABLES REMOVING THEM FROM THOSE LISTS AFTER REVIEW.  RECOMMEND NOT TO MIGRATE.
HIV_PATIENT_LIST_STATUS

# TABLE THAT KEEPS TRACK OF HISTORICAL REPORT EVALUATIONS AND ALLOWS FOR DOWNLOADING THE RESULTS
HIV_REPORT_REQUEST


###### TODO ######


###### METADATA / LOOKUP TABLES #####

HIV_INSTITUTIONS
HIV_LABORATORIES
HIV_LAB_TESTS
HIV_PRODUCTS
HIV_PRODUCT_CATEGORY
HIV_STANDARD_REGIMES
HIV_STANDARD_REGIME_DRUGS

###### PATIENT TABLES ######

# MANY-TO-ONE ENCOUNTER-LESS OBS
HIV_REGIME_COMMENTS

# MANY-TO-ONE BOOK-KEEPING TABLES KEEPING TRACK OF WHETHER PATIENT HAD A DATA AUDIT DONE, WHAT FIELDS CHANGED DURING THE AUDIT, COMMENTS, AND STATUS OF AUDIT
HIV_DATA_AUDIT
HIV_DATA_AUDIT_ENTRY

# MANY-TO-ONE PATIENT TRACKING FORMS
HIV_DATA_AUDIT_TRACKING_FORMS

###### ENCOUNTER TABLES ######

HIV_ENCOUNTERS

# OTHER COMBINATION
"accompagnateur", "HIV_DATA_AUDIT_ENTRY"
"anlap_vital_signs", "HIV_EXAM_VITAL_SIGNS"
"hop_abstraction", "HIV_OBSERVATIONS", "HIV_TB_STATUS"
"lab_result", "HIV_DATA_AUDIT_ENTRY"
"patient_contact", "HIV_DATA_AUDIT_ENTRY"
"regime", "HIV_OBSERVATIONS", "HIV_REGIMES"

"HIV_DATA_AUDIT_ENTRY", "accompagnateur", "followup", "intake", "lab_result", "patient_contact"
"HIV_OBSERVATIONS", "accompagnateur", "followup", "food_support", "hop_abstraction", "intake", "pregnancy", "regime"
"HIV_EXAM_VITAL_SIGNS", "anlap_vital_signs", "followup", "food_study", "intake", "patient_contact"
"HIV_ENCOUNTERS", "followup", "lab_result"
"HIV_TB_STATUS", "followup", "hop_abstraction", "intake"
"HIV_REGIMES", "intake", "regime"

# LINKED TO BOTH ENCOUNTER AND PATIENT.  WHEN ONLY PATIENT LINK EXISTS, IMPLIED TO BE FROM INTAKE
HIV_TB_STATUS

# MANY-TO-ONE ENCOUNTER DATA
HIV_OBSERVATIONS
HIV_REGIMES

# NOT LINKED TO ENCOUNTER DIRECTLY, BUT ONLY COLLECTED VIA HOP_ABSTRACTION ENCOUNTER.  patient_id, obs_name, obs_value, entry_date, entered_by
# HOSPITALIZED_AT_ART_INITIATION (t/f/not_specified) and CHART_NOT_FOUND (t)
HIV_PATIENT_OBS

###### EXPOSED INFANTS, PCR TESTING, SOCIAL SUPPORT ######
HIV_INFANTS
HIV_LAB_TRACKING
HIV_PCR_TESTS
HIV_PCR_TRACKING
HIV_SOCIAL_SUPPORT
HIV_SOCIAL_SUPPORT_TYPE

###### REPORTING AGGREGATE DATA ######
HIV_REPORT_INDICATOR_VALUE

HIV_REPORT_FREQUENCY
HIV_REPORT_GROUP
HIV_REPORT_GROUP_TEMPLATE
HIV_REPORT_INDICATOR
HIV_REPORT_INDICATOR_GROUP

###### SURVEILLANCE ######
HIV_SURVEILLANCE_LOG
HIV_SURVEILLANCE_LOG_ENTRY
HIV_SURVEILLANCE_NEW


# Remaining stuff for encounters...

Test HIV_OBSERVATIONS population across all enocunter types
In unit tests, ignore "'drug_started_dose_unit_1-4'"

 ***** intake ***** 
HIV_REGIMES (product_id, encounter_opened_by, ddd, dwd, prn, start_date) - only 3 of these
 HIV_TB_STATUS (ENCOUNTER_ID, TYPE, PULMONARY_P, STATUS_DATE, PPD_POSITIVE, TB_ACTIVE_P, EXTRAPULMONARY_P, DRUG_RESISTANT_P, DRUG_RESISTANT_COMMENT, ENTERED_DATE, ENTERED_BY)

 ***** followup ***** 
 HIV_OBSERVATIONS (ENCOUNTER_ID, OBSERVATION, VALUE, ENTRY_DATE)
 HIV_TB_STATUS (ENCOUNTER_ID, TYPE, PULMONARY_P, STATUS_DATE, PPD_POSITIVE, TB_ACTIVE_P, EXTRAPULMONARY_P, DRUG_RESISTANT_P, ENTERED_DATE, ENTERED_BY)


ENCOUNTERS OR DATA ENTRY TXNS TO ADD STILL

 ***** regime ***** 
 HIV_REGIMES
 HIV_OBSERVATIONS (ENCOUNTER_ID, OBSERVATION, VALUE, ENTRY_DATE)

 ***** hop_abstraction *****
HIV_OBSERVATIONS (ENCOUNTER_ID, OBSERVATION, VALUE, ENTRY_DATE) - only 4
HIV_TB_STATUS (ENCOUNTER_ID, TYPE, PULMONARY_P, STATUS_DATE, PPD_POSITIVE, TB_ACTIVE_P, EXTRAPULMONARY_P, DRUG_RESISTANT_P, ENTERED_DATE, ENTERED_BY) - 4

Encounter types with data for each table

HIV_TB_STATUS: [followup, intake]
HIV_REGIMES: [intake, regime]

HIV_DATA_AUDIT_ENTRY foreign keys to the following encounter types:
accompagnateur, followup, intake, lab_result, patient_contact
